{"data":{"orgContent":{"html":"<p>I recently started making heavy use of a feature in org-babel called org-babel-tangle, to create <a href=\"https://en.wikipedia.org/wiki/Literate_programming\">literate</a> <a href=\"https://en.wikipedia.org/wiki/Hidden_file_and_hidden_directory\">dotfiles</a>. It's simple to use, and makes for<i>very</i> readable code.</p><p>For this blog, I'll be (re)creating my tmux config by tangling the source seen in this post. Everything below the break is copied over (with some minor editorialization ) from my actual tmux org file. And since you can [[https://www.gatsbyjs.org/packages/gatsby-transformer-orga/][author gatsby content with org markdown]], I was able to just copy over the contents whole cloth.</p><p><a href=\"https://raw.githubusercontent.com/diminishedprime/matts-blog/master/content/blog/org-tangle/index.org\">Raw text for this file.</a></p><p>Note: In my actual <code>.tmux.org</code> file, I use <code>conf</code> instead of <code>properties</code> for the src block language. This only effects how emacs does syntax highlighting of the contents. Since <code>conf</code> isn't a <a href=\"https://prismjs.com/#languages-list\">supported language of prism-js</a>, I'm using<code>properties</code> which isn't perfect, but is better than nothing.</p><hr><div class=\"section\"><h2>Exports</h2><p>To tangle this file, open it, then enter (org major mode, babel, tangle)</p><pre><code class=\"language-text\">  ,bt</code></pre><p>This file should be sourced as soon as possible, since we want all child processes to have access to these exported variables.</p><p>Since we symlink all of our scripts to <code>~/.local/bin</code>, we want to make sure that they are visible.</p><pre><code class=\"language-sh\">  export PATH=\"$PATH\":~/.local/bin</code></pre><p>We also want to make sure that cargo bin is on our path since many of our executables end up there.</p><pre><code class=\"language-sh\">  export PATH=\"$HOME/.cargo/bin:$PATH\"</code></pre><p>In order for emacs to have 24-bit color in terminal mode, we need a combination of our <code>terminfo</code> entry and to set our term to be <code>xterm-24bits</code></p><pre><code class=\"language-sh\">  export TERM=xterm-24bits</code></pre><p>And speaking of editor, we want our editor to be emacsclient. The <code>t</code> flag opens a new Emacs frame on the current terminal. and the =-a \"\"= opens emacs in daemon mode, then connects to it.</p><pre><code class=\"language-sh\">  export EDITOR='emacsclient -t -a \"\"'</code></pre><p>We want to have pretty dircolors as well. This will make sure that happens.</p><pre><code class=\"language-sh\">  eval \"$(dircolors ~/programming/dotfiles/dotfiles/.dircolors)\"</code></pre><p>These should be private eventually, but this will do for now.</p><pre><code class=\"language-sh\">  export XCAPE=/usr/local/google/home/mjhamrick/.nix-profile/bin/xcape\n  export MJH_NORMAL_CHROME_SCALE_FACTOR=1.3</code></pre></div><div class=\"section\"><h2>Tmux Config</h2><p>I prefer using <code>M-Space</code> for my tmux modifier instead of the default <code>C-b</code>, so I start by getting that setup.</p><pre><code class=\"language-properties\"><span class=\"token attr-name\">  unbind</span> <span class=\"token attr-value\">C-b</span>\n<span class=\"token attr-name\">  set</span> <span class=\"token attr-value\">-g prefix C-Space</span>\n<span class=\"token attr-name\">  set</span> <span class=\"token attr-value\">-g prefix M-Space</span>\n<span class=\"token attr-name\">  bind</span> <span class=\"token attr-value\">Space send-prefix</span></code></pre><p>I want my terminal to be setup as <code>xterm-24bits</code> since that (along with some other magic), is necessary to get 24-bit color to work with emacs.</p><pre><code class=\"language-properties\"><span class=\"token attr-name\">  set</span> <span class=\"token attr-value\">-g default-terminal \"xterm-24bits\"</span>\n<span class=\"token attr-name\">  set</span> <span class=\"token attr-value\">-ga terminal-overrides \",xterm-24bits:Tc\"</span></code></pre><p>I prefer to use vi keybindings for copy-paste, etc.</p><pre><code class=\"language-properties\"><span class=\"token attr-name\">  set-window-option</span> <span class=\"token attr-value\">-g mode-keys vi</span></code></pre><p>Tmux copy-paste is confusing, but I don't blame tmux. Setting this up makes it where (at least most of the time), tmux copies to my system clipboard.</p><p>Use <code>M-Space [</code> to enter copy mode.</p><pre><code class=\"language-properties\"><span class=\"token attr-name\">  bind-key</span> <span class=\"token attr-value\">-T copy-mode-vi 'v' send-keys -X begin-selection</span>\n<span class=\"token attr-name\">  bind-key</span> <span class=\"token attr-value\">-T copy-mode-vi 'y' send-keys -X copy-selection-and-cancel</span>\n<span class=\"token attr-name\">  bind-key</span> <span class=\"token attr-value\">-T copy-mode-vi 'Escape' send-keys -X cancel</span></code></pre><p>This makes it where escape isn't sent as mod all the time.</p><pre><code class=\"language-properties\"><span class=\"token attr-name\">  set</span> <span class=\"token attr-value\">-sg escape-time 0</span></code></pre><p>Using the mouse with tmux is often easier than other means, fite me.</p><pre><code class=\"language-properties\"><span class=\"token attr-name\">  set</span> <span class=\"token attr-value\">-g mouse on</span></code></pre><p>Some vim-influenced things. Use <code>hjkl</code> for selecting panes, and <code>HJKL</code> for swapping panes in that direction.</p><pre><code class=\"language-properties\"><span class=\"token attr-name\">  bind</span> <span class=\"token attr-value\">h select-pane -L</span>\n<span class=\"token attr-name\">  bind</span> <span class=\"token attr-value\">j select-pane -D</span>\n<span class=\"token attr-name\">  bind</span> <span class=\"token attr-value\">k select-pane -U</span>\n<span class=\"token attr-name\">  bind</span> <span class=\"token attr-value\">l select-pane -R</span>\n\n<span class=\"token attr-name\">  bind</span> <span class=\"token attr-value\">H select-pane -L \\; swap-pane -s '!'</span>\n<span class=\"token attr-name\">  bind</span> <span class=\"token attr-value\">J select-pane -D \\; swap-pane -s '!'</span>\n<span class=\"token attr-name\">  bind</span> <span class=\"token attr-value\">K select-pane -U \\; swap-pane -s '!'</span>\n<span class=\"token attr-name\">  bind</span> <span class=\"token attr-value\">L select-pane -R \\; swap-pane -s '!'</span></code></pre><p>Bindings for selecting windows. <code>M-Space 0-9</code> are set up (chrome-style) to pick that window. <code>M-Space b</code> and <code>M-b</code> are set up to switch to the previously selected window.</p><pre><code class=\"language-properties\"><span class=\"token attr-name\">  bind-key</span> <span class=\"token attr-value\">-n M-b last-window</span>\n<span class=\"token attr-name\">  bind-key</span> <span class=\"token attr-value\">b last-window</span>\n\n<span class=\"token attr-name\">  bind-key</span> <span class=\"token attr-value\">-n M-0 select-window -t 0</span>\n<span class=\"token attr-name\">  bind-key</span> <span class=\"token attr-value\">-n M-1 select-window -t 1</span>\n<span class=\"token attr-name\">  bind-key</span> <span class=\"token attr-value\">-n M-2 select-window -t 2</span>\n<span class=\"token attr-name\">  bind-key</span> <span class=\"token attr-value\">-n M-3 select-window -t 3</span>\n<span class=\"token attr-name\">  bind-key</span> <span class=\"token attr-value\">-n M-4 select-window -t 4</span>\n<span class=\"token attr-name\">  bind-key</span> <span class=\"token attr-value\">-n M-5 select-window -t 5</span>\n<span class=\"token attr-name\">  bind-key</span> <span class=\"token attr-value\">-n M-6 select-window -t 6</span>\n<span class=\"token attr-name\">  bind-key</span> <span class=\"token attr-value\">-n M-7 select-window -t 7</span>\n<span class=\"token attr-name\">  bind-key</span> <span class=\"token attr-value\">-n M-8 select-window -t 8</span>\n<span class=\"token attr-name\">  bind-key</span> <span class=\"token attr-value\">-n M-9 select-window -t 9</span></code></pre><p>I like to split windows spacemacs style.</p><ul><li><code>M-Space \\</code> - split horizontally (\\ is the same key as |, but no need to hold shift)</li><li><code>M-Space -</code> - split vertically</li></ul><p>We also unbind the original keys to keep things clean.</p><pre><code class=\"language-properties\"><span class=\"token attr-name\">  unbind</span> <span class=\"token attr-value\">'\"'</span>\n<span class=\"token attr-name\">  bind</span> <span class=\"token attr-value\">\\ split-window -h -c \"#{pane_current_path}\"</span>\n\n<span class=\"token attr-name\">  unbind</span> <span class=\"token attr-value\">%</span>\n<span class=\"token attr-name\">  bind</span> <span class=\"token attr-value\">- split-window -v -c \"#{pane_current_path}\"</span></code></pre><p>I usually just use <code>M-Space z</code> for full screening, but I like having <code>M-Space u</code>also available since that matches my i3 setup.</p><pre><code class=\"language-properties\"><span class=\"token attr-name\">  bind</span> <span class=\"token attr-value\">u resize-pane -Z</span></code></pre><p>Always nice to be able to resource the tmux file so it's easier to try out changes.</p><pre><code class=\"language-properties\"><span class=\"token attr-name\">  bind</span> <span class=\"token attr-value\">r source-file ~/.tmux.conf</span></code></pre><p>A bunch of status-related things.</p><ul><li><code>status-keys emacs</code> - Use emacs-style bindings for status-keys things. This lets me use things like <code>C-e</code> and <code>C-d</code> while editing window names.</li></ul><pre><code class=\"language-properties\"><span class=\"token attr-name\">  set</span> <span class=\"token attr-value\">-g status on</span>\n<span class=\"token attr-name\">  set</span> <span class=\"token attr-value\">-g status-justify left</span>\n<span class=\"token attr-name\">  set</span> <span class=\"token attr-value\">-g status-keys emacs</span>\n<span class=\"token attr-name\">  set</span> <span class=\"token attr-value\">-g status-position top</span>\n<span class=\"token attr-name\">  set</span> <span class=\"token attr-value\">-g status-style 'fg=#ffffff,bg=#002b36'</span>\n<span class=\"token attr-name\">  set</span> <span class=\"token attr-value\">-g status-right ''</span>\n<span class=\"token attr-name\">  set</span> <span class=\"token attr-value\">-g status-left '#(~/.local/bin/mjh-tmux-status-left.sh)'</span>\n<span class=\"token attr-name\">  set</span> <span class=\"token attr-value\">-g window-status-format '#[fg=#657b83]#[bg=#002b36]#I: #W'</span>\n<span class=\"token attr-name\">  set</span> <span class=\"token attr-value\">-g window-status-current-format '#[fg=#2aa198]#[bg=002b36]#I: #W'</span></code></pre><p>Use fish as the default shell</p><pre><code class=\"language-properties\"><span class=\"token attr-name\">  set</span> <span class=\"token attr-value\">-g default-shell /usr/bin/fish</span></code></pre></div>","meta":{"title":"Org Babel Tangle","date":"April 21, 2019"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/index","previous":null,"next":null}}